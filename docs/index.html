<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Perform Inference on Algorithm-Agnostic Variable Importance • vimp</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Perform Inference on Algorithm-Agnostic Variable Importance">
<meta property="og:description" content="Calculate point estimates of and valid confidence intervals for
    nonparametric, algorithm-agnostic variable importance measures in high and low dimensions,
    using flexible estimators of the underlying regression functions. For more information
    about the methods, please see Williamson et al. (Biometrics, 2020),  Williamson et al. (arXiv, 2020+) &lt;arXiv:2004.03683&gt;, and Williamson and Feng (ICML, 2020).">
<meta property="og:image" content="https://bdwilliamson.github.io/vimp/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">vimp</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/introduction-to-vimp.html">Introduction to `vimp`</a>
    </li>
    <li>
      <a href="articles/precomputed-regressions.html">Using precomputed regression function estimates in `vimp`</a>
    </li>
    <li>
      <a href="articles/types-of-vims.html">Types of VIMs</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/bdwilliamson/vimp/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="rvimp-inference-on-algorithm-agnostic-variable-importance-" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#rvimp-inference-on-algorithm-agnostic-variable-importance-" class="anchor"></a>R/<code>vimp</code>: inference on algorithm-agnostic variable importance <img src="reference/figures/logo.png" align="right" width="120px">
</h1></div>

<p><strong>Software authors:</strong> <a href="https://bdwilliamson.github.io/">Brian Williamson</a> and <a href="https://jeanfeng.com/">Jean Feng</a></p>
<p><strong>Methodology authors:</strong> <a href="https://bdwilliamson.github.io/">Brian Williamson</a>, <a href="https://www.fredhutch.org/en/faculty-lab-directory/gilbert-peter.html">Peter Gilbert</a>, <a href="http://faculty.washington.edu/nrsimon/">Noah Simon</a>, <a href="http://faculty.washington.edu/mcarone/about.html">Marco Carone</a>, <a href="https://jeanfeng.com/">Jean Feng</a></p>
<p><strong>Python package:</strong> <a href="https://github.com/bdwilliamson/vimpy" class="uri">https://github.com/bdwilliamson/vimpy</a></p>
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>In predictive modeling applications, it is often of interest to determine the relative contribution of subsets of features in explaining an outcome; this is often called variable importance. It is useful to consider variable importance as a function of the unknown, underlying data-generating mechanism rather than the specific predictive algorithm used to fit the data. This package provides functions that, given fitted values from predictive algorithms, compute algorithm-agnostic estimates of population variable importance, along with asymptotically valid confidence intervals for the true importance and hypothesis tests of the null hypothesis of zero importance.</p>
<p>Specifically, the types of variable importance supported by <code>vimp</code> include: difference in population classification accuracy, difference in population area under the receiver operating characteristic curve, difference in population deviance, difference in population R-squared.</p>
<p>More detail may be found in our paper on <a href="https://doi.org/10.1111/biom.13392">R-squared-based variable importance</a> and in our tech reports on <a href="https://arxiv.org/abs/2004.03683">general variable importance</a> and <a href="https://arxiv.org/abs/2006.09481">general Shapley-based variable importance</a>.</p>
<p>This method works on low-dimensional and high-dimensional data.</p>
</div>
<div id="issues" class="section level2">
<h2 class="hasAnchor">
<a href="#issues" class="anchor"></a>Issues</h2>
<p>If you encounter any bugs or have any specific feature requests, please <a href="https://github.com/bdwilliamson/vimp/issues">file an issue</a>.</p>
</div>
<div id="r-installation" class="section level2">
<h2 class="hasAnchor">
<a href="#r-installation" class="anchor"></a>R installation</h2>
<p>You may install a stable release of <code>vimp</code> from <a href="https://cran.r-project.org/web/packages/vimp/index.html">CRAN</a> via <code><a href="https://rdrr.io/r/utils/install.packages.html">install.packages("vimp")</a></code>. You may also install a stable release of <code>vimp</code> from GitHub via <a href="https://www.rstudio.com/products/rpackages/devtools/"><code>devtools</code></a> by running the following code (replace <code>v2.1.0</code> with the tag for the specific release you wish to install):</p>
<div class="sourceCode" id="cb1"><pre class="r"><span class="co">## install.packages("devtools") # only run this line if necessary</span>
<span class="kw pkg">devtools</span><span class="kw ns">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span>(<span class="kw">repo</span> <span class="kw">=</span> <span class="st">"bdwilliamson/vimp@v2.1.0"</span>)</pre></div>
<p>You may install a development release of <code>vimp</code> from GitHub via <a href="https://www.rstudio.com/products/rpackages/devtools/"><code>devtools</code></a> by running the following code:</p>
<div class="sourceCode" id="cb2"><pre class="r"><span class="co">## install.packages("devtools") # only run this line if necessary</span>
<span class="kw pkg">devtools</span><span class="kw ns">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span>(<span class="kw">repo</span> <span class="kw">=</span> <span class="st">"bdwilliamson/vimp"</span>)</pre></div>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<p>This example shows how to use <code>vimp</code> in a simple setting with simulated data, using <code>SuperLearner</code> to estimate the conditional mean functions and specifying the importance measure of interest as the R-squared-based measure. For more examples and detailed explanation, please see the <a href="https://bdwilliamson.github.io/vimp/introduction_to_vimp.html">vignette</a>.</p>
<div class="sourceCode" id="cb3"><pre class="r"><span class="co">## load required functions and libraries</span>
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="st">"SuperLearner"</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="st">"vimp"</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="st">"xgboost"</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="st">"glmnet"</span>)

<span class="co">## -------------------------------------------------------------</span>
<span class="co">## problem setup</span>
<span class="co">## -------------------------------------------------------------</span>
<span class="co">## set up the data</span>
<span class="no">n</span> <span class="kw">&lt;-</span> <span class="fl">100</span>
<span class="no">p</span> <span class="kw">&lt;-</span> <span class="fl">2</span>
<span class="no">s</span> <span class="kw">&lt;-</span> <span class="fl">1</span> <span class="co"># desire importance for X_1</span>
<span class="no">x</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/lapply.html">replicate</a></span>(<span class="no">p</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span>(<span class="no">n</span>, -<span class="fl">1</span>, <span class="fl">1</span>)))
<span class="no">y</span> <span class="kw">&lt;-</span> (<span class="no">x</span>[,<span class="fl">1</span>])^<span class="fl">2</span>*(<span class="no">x</span>[,<span class="fl">1</span>]+<span class="fl">7</span>/<span class="fl">5</span>) + (<span class="fl">25</span>/<span class="fl">9</span>)*(<span class="no">x</span>[,<span class="fl">2</span>])^<span class="fl">2</span> + <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span>(<span class="no">n</span>, <span class="fl">0</span>, <span class="fl">1</span>)

<span class="co">## -------------------------------------------------------------</span>
<span class="co">## preliminary step: estimate the conditional means</span>
<span class="co">## -------------------------------------------------------------</span>
<span class="co">## set up the learner library, consisting of the mean, boosted trees,</span>
<span class="co">## elastic net, and random forest</span>
<span class="no">learner.lib</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"SL.mean"</span>, <span class="st">"SL.xgboost"</span>, <span class="st">"SL.glmnet"</span>, <span class="st">"SL.randomForest"</span>)

<span class="co">## the full conditional mean</span>
<span class="no">full_regression</span> <span class="kw">&lt;-</span> <span class="kw pkg">SuperLearner</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/SuperLearner/man/SuperLearner.html">SuperLearner</a></span>(<span class="kw">Y</span> <span class="kw">=</span> <span class="no">y</span>, <span class="kw">X</span> <span class="kw">=</span> <span class="no">x</span>, <span class="kw">family</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/family.html">gaussian</a></span>(), <span class="kw">SL.library</span> <span class="kw">=</span> <span class="no">learner.lib</span>)
<span class="no">full_fit</span> <span class="kw">&lt;-</span> <span class="no">full_regression</span>$<span class="no">SL.predict</span>

<span class="co">## the reduced conditional mean</span>
<span class="no">reduced_regression</span> <span class="kw">&lt;-</span> <span class="kw pkg">SuperLearner</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/SuperLearner/man/SuperLearner.html">SuperLearner</a></span>(<span class="kw">Y</span> <span class="kw">=</span> <span class="no">full_fit</span>, <span class="kw">X</span> <span class="kw">=</span> <span class="no">x</span>[, -<span class="no">s</span>, <span class="kw">drop</span> <span class="kw">=</span> <span class="fl">FALSE</span>], <span class="kw">family</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/family.html">gaussian</a></span>(), <span class="kw">SL.library</span> <span class="kw">=</span> <span class="no">learner.lib</span>)
<span class="no">reduced_fit</span> <span class="kw">&lt;-</span> <span class="no">reduced_regression</span>$<span class="no">SL.predict</span>

<span class="co">## -------------------------------------------------------------</span>
<span class="co">## get variable importance!</span>
<span class="co">## -------------------------------------------------------------</span>
<span class="co">## get the variable importance estimate, SE, and CI</span>
<span class="no">vimp</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/vimp_rsquared.html">vimp_rsquared</a></span>(<span class="kw">Y</span> <span class="kw">=</span> <span class="no">y</span>, <span class="kw">f1</span> <span class="kw">=</span> <span class="no">full_fit</span>, <span class="kw">f2</span> <span class="kw">=</span> <span class="no">reduced_fit</span>, <span class="kw">indx</span> <span class="kw">=</span> <span class="fl">1</span>, <span class="kw">run_regression</span> <span class="kw">=</span> <span class="fl">FALSE</span>)</pre></div>
</div>
<div id="citation" class="section level2">
<h2 class="hasAnchor">
<a href="#citation" class="anchor"></a>Citation</h2>
<p>After using the <code>vimp</code> package, please cite the following (for R-squared-based variable importance):</p>
<pre><code>    @article{williamson2020,
      author={Williamson, BD and Gilbert, PB and Carone, M and Simon, R},
      title={Nonparametric variable importance assessment using machine learning techniques},
      journal={Biometrics},
      year={2020},
      doi={10.1111/biom.13392}
    }</code></pre>
<p>or the following (for general variable importance parameters):</p>
<pre><code>  @article{williamson2020,
    author={Williamson, BD and Gilbert, PB and Simon, NR and Carone, M},
    title={A unified approach for inference on algorithm-agnostic variable importance},
    journal={arXiv:2004.03683},
    year={2020},
    note={URL: https://arxiv.org/abs/2004.03683}
  }</code></pre>
<p>or the following (for Shapley-based variable importance):</p>
<pre><code>  @inproceedings{williamson2020,
    title={Efficient nonparametric statistical inference on population feature importance using {S}hapley values},
    author={Williamson, BD and Feng, J},
    year={2020},
    booktitle={Proceedings of the 37th International Conference on Machine Learning},
    volume={119},
    pages={10282--10291},
    series = {Proceedings of Machine Learning Research},
    URL = {http://proceedings.mlr.press/v119/williamson20a.html}
}</code></pre>
</div>
<div id="license" class="section level2">
<h2 class="hasAnchor">
<a href="#license" class="anchor"></a>License</h2>
<p>The contents of this repository are distributed under the MIT license. See below for details:</p>
<pre><code>MIT License

Copyright (c) [2018-2021] [Brian D. Williamson]

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.</code></pre>
</div>
<div id="logo" class="section level2">
<h2 class="hasAnchor">
<a href="#logo" class="anchor"></a>Logo</h2>
<p>The logo was created using <a href="https://github.com/GuangchuangYu/hexSticker">hexSticker</a> and <a href="https://github.com/tyluRp/lisa">lisa</a>. Many thanks to the maintainers of these packages and the <a href="http://colorlisa.com/">Color Lisa</a> team.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=vimp">https://​cloud.r-project.org/​package=vimp</a>
</li>
<li>Browse source code at <br><a href="https://github.com/bdwilliamson/vimp/">https://​github.com/​bdwilliamson/​vimp/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/bdwilliamson/vimp/issues">https://​github.com/​bdwilliamson/​vimp/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="citation">
<h2>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html">Citing vimp</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Brian D. Williamson <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-7024-548X" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://cran.r-project.org/package=vimp"><img src="http://www.r-pkg.org/badges/version/vimp" alt="CRAN_Status_Badge"></a></li>
<li><a href="https://travis-ci.org/bdwilliamson/vimp"><img src="https://travis-ci.org/bdwilliamson/vimp.svg?branch=master" alt="Travis-CI Build Status"></a></li>
<li><a href="https://ci.appveyor.com/project/bdwilliamson/vimp"><img src="https://ci.appveyor.com/api/projects/status/github/bdwilliamson/vimp?branch=master&amp;svg=true" alt="AppVeyor Build Status"></a></li>
<li><a href="https://codecov.io/github/bdwilliamson/vimp?branch=master"><img src="https://codecov.io/gh/bdwilliamson/vimp/branch/master/graph/badge.svg" alt="Coverage status"></a></li>
<li><a href="https://CRAN.R-project.org/package=vimp"><img src="https://cranlogs.r-pkg.org/badges/vimp" alt="CRAN downloads"></a></li>
<li><a href="http://www.repostatus.org/#active"><img src="http://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active – The project has reached a stable, usable state and is being actively developed."></a></li>
<li><a href="https://opensource.org/licenses/MIT"><img src="https://img.shields.io/badge/License-MIT-yellow.svg" alt="License: MIT"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Brian D. Williamson.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
